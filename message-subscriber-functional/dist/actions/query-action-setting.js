System.register(["jimu-core","jimu-ui/advanced/data-source-selector","jimu-ui/advanced/setting-components"],(function(e,t){var a={},o={},r={};return{setters:[function(e){a.Immutable=e.Immutable,a.React=e.React,a.getAppStore=e.getAppStore,a.jsx=e.jsx},function(e){o.FieldSelector=e.FieldSelector},function(e){r.SettingSection=e.SettingSection}],execute:function(){e((()=>{"use strict";var e={8891:e=>{e.exports=a},338:e=>{e.exports=o},7756:e=>{e.exports=r}},t={};function u(a){var o=t[a];if(void 0!==o)return o.exports;var r=t[a]={exports:{}};return e[a](r,r.exports,u),r.exports}u.d=(e,t)=>{for(var a in t)u.o(t,a)&&!u.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},u.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),u.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var c={};return(()=>{u.r(c),u.d(c,{default:()=>r});var e=u(8891),t=u(338),a=u(7756);const{useEffect:o}=e.React,r=function(r){const u=()=>{const t=r.messageWidgetId,a=(0,e.getAppStore)().getState().appStateInBuilder.appConfig.widgets[t];let o=null;return r.config.useDataSource?o=r.config.useDataSource:a&&a.useDataSources&&a.useDataSources[0]&&1===a.useDataSources.length&&(o=(0,e.Immutable)({dataSourceId:a.useDataSources[0].dataSourceId,mainDataSourceId:a.useDataSources[0].mainDataSourceId,dataViewId:a.useDataSources[0].dataViewId,rootDataSourceId:a.useDataSources[0].rootDataSourceId})),o};o((()=>{r.onSettingChange({actionId:r.actionId,config:r.config.set("useDataSource",u())})}),[]);const c=(t=>{var a,o,r;const u=null===(o=null===(a=(0,e.getAppStore)().getState())||void 0===a?void 0:a.appStateInBuilder)||void 0===o?void 0:o.appConfig,c=null===(r=null==u?void 0:u.widgets)||void 0===r?void 0:r[t];return c&&c.useDataSources})(r.widgetId);return(0,e.jsx)("div",null,(0,e.jsx)(a.SettingSection,{title:"Select field"},c&&c.length>0&&(0,e.jsx)("div",{className:"mt-2"},"Please choose a field to query from:",(0,e.jsx)(t.FieldSelector,{useDataSources:c,onChange:(e,t)=>{const a=e[0];a&&r.config.useDataSource&&r.onSettingChange({actionId:r.actionId,config:r.config.set("fieldName",a.name).set("useDataSource",{dataSourceId:r.config.useDataSource.dataSourceId,mainDataSourceId:r.config.useDataSource.mainDataSourceId,dataViewId:r.config.useDataSource.dataViewId,rootDataSourceId:r.config.useDataSource.rootDataSourceId,fields:e.map((e=>e.jimuName))})})},selectedFields:r.config.useDataSource&&r.config.useDataSource.fields?r.config.useDataSource.fields:(0,e.Immutable)([])}))))}})(),c})())}}}));